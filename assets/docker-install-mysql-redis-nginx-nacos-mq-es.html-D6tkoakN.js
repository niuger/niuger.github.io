import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as l,o as p,c,b as n,e as s,d as e,a as t}from"./app-D1uezr0R.js";const r={},o=n("p",null,"Docker安装mysql、redis、nginx、nacos、mq、es等",-1),d={id:"csdn-博客地址",tabindex:"-1"},u={class:"header-anchor",href:"#csdn-博客地址"},k={href:"https://blog.csdn.net/qq_42476834/article/details/112675953",target:"_blank",rel:"noopener noreferrer"},m=t(`<h1 id="docker安装-mysql、redis、nginx、nacos、es-kibana、seata" tabindex="-1"><a class="header-anchor" href="#docker安装-mysql、redis、nginx、nacos、es-kibana、seata"><span>docker安装 MySQL、Redis、Nginx、nacos、es+kibana、seata</span></a></h1><p>docker桌面镜像加速</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code>  <span class="token property">&quot;registry-mirrors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
     <span class="token string">&quot;https://04eo9xup.mirror.aliyuncs.com&quot;</span><span class="token punctuation">,</span>
     <span class="token string">&quot;https://098cc8006500f4db0f2fc01937bbce40.mirror.swr.myhuaweicloud.com&quot;</span>
  <span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>--name=&quot;容器新名字&quot;：为容器指定一个名称；<br> -i：以交互模式运行容器，通常与-t或者-d同时使用；<br> -t：为容器重新分配一个伪输入终端，通常与-i同时使用；<br> -d: 后台运行容器，并返回容器ID；<br> -P: 随机端口映射，容器内部端口随机映射到主机的端口<br> -p: 指定端口映射，格式为：主机(宿主)端口:容器端口</p></blockquote><h2 id="mysql-5-7-x" tabindex="-1"><a class="header-anchor" href="#mysql-5-7-x"><span>mysql:5.7.x</span></a></h2>`,5),v={href:"https://hub.docker.com/search?q=mysql&type=image",target:"_blank",rel:"noopener noreferrer"},b={href:"http://registry.cn-chengdu.aliyuncs.com/jinfang/mysql:5.7.38",target:"_blank",rel:"noopener noreferrer"},g=t(`<p>查看镜像</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>root@kong:/data/software<span class="token comment"># docker images</span>
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
mysql               <span class="token number">5.7</span>.38              697daaecf703        <span class="token number">16</span> hours ago        448MB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行创建容器</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># 设置 /etc/mysql/my.cnf 和 /etc/mysql/conf.d/my.cnf 与设置从后者采取优先。</span>
<span class="token comment">################################ Linux端 #################################</span>
<span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token parameter variable">--name</span> mysql <span class="token punctuation">\\</span>
<span class="token parameter variable">-v</span> /media/jf123/deepin/rj/docker/mysql/data:/var/lib/mysql <span class="token punctuation">\\</span>
<span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token punctuation">\\</span>
<span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>root <span class="token punctuation">\\</span>
<span class="token parameter variable">-d</span> registry.cn-chengdu.aliyuncs.com/jinfang/mysql:5.7.38 <span class="token punctuation">\\</span>
--character-set-server<span class="token operator">=</span>utf8mb4 <span class="token punctuation">\\</span>
--collation-server<span class="token operator">=</span>utf8mb4_general_ci <span class="token punctuation">\\</span>
--symbolic-links<span class="token operator">=</span><span class="token number">0</span> <span class="token punctuation">\\</span>
<span class="token parameter variable">--max_connections</span><span class="token operator">=</span><span class="token number">1000</span> <span class="token punctuation">\\</span>
<span class="token parameter variable">--explicit_defaults_for_timestamp</span><span class="token operator">=</span>true
<span class="token comment">################################## window端 ###############################</span>
 <span class="token function">docker</span> run <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> IMAGE <span class="token punctuation">[</span>COMMAND<span class="token punctuation">]</span> <span class="token punctuation">[</span>ARG<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
 OPTIONS: <span class="token parameter variable">-a</span> <span class="token parameter variable">-e</span> <span class="token parameter variable">-c</span> <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token parameter variable">-P</span> <span class="token parameter variable">-m</span>
 
<span class="token comment">#################################################################</span>

<span class="token comment"># 使用config</span>
<span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token parameter variable">--name</span> mysql <span class="token parameter variable">-v</span> E:<span class="token punctuation">\\</span>docker<span class="token punctuation">\\</span>mysql<span class="token punctuation">\\</span>data:/var/lib/mysql <span class="token parameter variable">-v</span> E:<span class="token punctuation">\\</span>docker<span class="token punctuation">\\</span>mysql<span class="token punctuation">\\</span>conf:/etc/mysql/ <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>root <span class="token parameter variable">-d</span> registry.cn-chengdu.aliyuncs.com/jinfang/mysql:5.7.38

<span class="token comment"># 使用命令配置（推荐）</span>
<span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">33061</span>:3306 <span class="token parameter variable">--name</span> mysql <span class="token parameter variable">-v</span> E:<span class="token punctuation">\\</span><span class="token punctuation">\\</span>docker<span class="token punctuation">\\</span><span class="token punctuation">\\</span>mysql<span class="token punctuation">\\</span><span class="token punctuation">\\</span>log:/var/log/mysql <span class="token parameter variable">-v</span> E:<span class="token punctuation">\\</span><span class="token punctuation">\\</span>docker<span class="token punctuation">\\</span><span class="token punctuation">\\</span>mysql<span class="token punctuation">\\</span><span class="token punctuation">\\</span>data:/var/lib/mysql <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>root <span class="token parameter variable">-d</span> registry.cn-chengdu.aliyuncs.com/jinfang/mysql:5.7.38 --character-set-server<span class="token operator">=</span>utf8mb4 --collation-server<span class="token operator">=</span>utf8mb4_general_ci
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在主机里配置mysql:</p><p>/docker/mysql/conf$ sudo vim my.cnf</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>client<span class="token punctuation">]</span>
default_character-set<span class="token operator">=</span>utf8

<span class="token punctuation">[</span>mysql<span class="token punctuation">]</span>
default-character-set<span class="token operator">=</span>utf8mb4

<span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
<span class="token comment">#log-bin=mysql-bin</span>
<span class="token comment">#server-id=1</span>
<span class="token comment">#binlog_format=ROW</span>
<span class="token assign-left variable">init_connect</span><span class="token operator">=</span><span class="token string">&#39;SET collation_connection=utf8mb4_general_ci&#39;</span>
<span class="token assign-left variable">init_connect</span><span class="token operator">=</span><span class="token string">&#39;SET NAMES utf8mb4&#39;</span>
character-set-server<span class="token operator">=</span>utf8mb4
collation-server<span class="token operator">=</span>utf8mb4_general_ci
skip-character-set-client-handshake
skip-name-resolve
default-storage-engine<span class="token operator">=</span>INNODB
symbolic-links<span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">max_connections</span><span class="token operator">=</span><span class="token number">1000</span>
<span class="token assign-left variable">explicit_defaults_for_timestamp</span><span class="token operator">=</span>true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重启MySQL容器，容器查看：docker exec -it mysql /bin/bash</p><h2 id="redis-buster" tabindex="-1"><a class="header-anchor" href="#redis-buster"><span>redis:buster</span></a></h2>`,9),h={href:"https://hub.docker.com/_/redis?tab=description",target:"_blank",rel:"noopener noreferrer"},f=n("p",null,"docker pull redis:buster docker pull redis:latest",-1),_={href:"http://registry.cn-chengdu.aliyuncs.com/jinfang/redis:latest",target:"_blank",rel:"noopener noreferrer"},y={href:"http://registry.cn-chengdu.aliyuncs.com/jinfang/redis:latest",target:"_blank",rel:"noopener noreferrer"},q={href:"http://registry.cn-chengdu.aliyuncs.com/jinfang/redis:latest",target:"_blank",rel:"noopener noreferrer"},x=t(`<p>查看镜像</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>root@kong:/data/software<span class="token comment"># docker images</span>
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
mysql               <span class="token number">5.7</span>.38              697daaecf703        <span class="token number">16</span> hours ago        448MB
redis               buster              ef47f3b6dc11        <span class="token number">17</span> hours ago        104MB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /mydoc/redis/conf
<span class="token function">touch</span> /mydoc/redis/conf/redis.conf
<span class="token comment">#################linux</span>
<span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">6491</span>:6379 <span class="token parameter variable">--name</span> redis <span class="token punctuation">\\</span>
<span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token punctuation">\\</span>
<span class="token parameter variable">-v</span> /media/jf123/deepin/rj/docker/redis/data:/data <span class="token punctuation">\\</span>
<span class="token parameter variable">-v</span> /media/jf123/deepin/rj/docker/redis/conf/redis.conf:/etc/redis/redis.conf <span class="token punctuation">\\</span>
<span class="token parameter variable">-d</span> registry.cn-chengdu.aliyuncs.com/jinfang/redis:latest redis-server /etc/redis/redis.conf
<span class="token comment">#################window</span>
<span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">6491</span>:6379 <span class="token parameter variable">--name</span> redis <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token parameter variable">-v</span> E:<span class="token punctuation">\\</span>docker<span class="token punctuation">\\</span>redis<span class="token punctuation">\\</span>data:/data <span class="token parameter variable">-v</span> E:<span class="token punctuation">\\</span>docker<span class="token punctuation">\\</span>redis<span class="token punctuation">\\</span>conf<span class="token punctuation">\\</span>redis.conf:/etc/redis/redis.conf <span class="token parameter variable">-d</span> registry.cn-chengdu.aliyuncs.com/jinfang/redis:latest redis-server /etc/redis/redis.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>Error response from daemon: Ports are not available: exposing port TCP 0.0.0.0:6379 -&gt; 0.0.0.0:0: listen tcp 0.0.0.0:6379: bind: An attempt was made to access a socket in a way forbidden by its access permissions.</p></blockquote><h2 id="docker-端口占用问题" tabindex="-1"><a class="header-anchor" href="#docker-端口占用问题"><span>docker 端口占用问题</span></a></h2><p>查看TCP：netsh interface ipv4 show excludedportrange protocol=tcp</p><pre><code>  开始端口    结束端口
 --------  ----------
  5891        5990
  5991        6090
  6091        6190
  6191        6290
  6291        6390
  6391        6490
</code></pre><p>更改：docker run -p 6491:6379</p><p>查看容器</p><p>docker logs --since 30m redis</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>root@kong:/data/software<span class="token comment"># docker ps -a</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                               NAMES
ce812650e93c        redis:buster        <span class="token string">&quot;docker-entrypoint.s…&quot;</span>   <span class="token number">15</span> seconds ago      Up <span class="token number">13</span> seconds       <span class="token number">0.0</span>.0.0:6379-<span class="token operator">&gt;</span><span class="token number">6379</span>/tcp              redis
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>（存在问题：重启后数据清空）所以要</p><p>-- 持久化</p><p>vim /mydoc/redis/conf/redis.conf</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>appendonly <span class="token function">yes</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>登陆容器，登陆redis客户端</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>root@kong:/mydoc<span class="token comment"># docker exec -it f04aeda2074b redis-cli</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> a val_123
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get a
<span class="token string">&quot;val_123&quot;</span>

退出-重启
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">exit</span>
root@kong:/mydoc<span class="token comment"># docker restart redis</span>
redis
root@kong:/mydoc<span class="token comment"># docker exec -it 53466246e9a2 redis-cli</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get a
<span class="token string">&quot;val_123&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="redisinsight-web端管理" tabindex="-1"><a class="header-anchor" href="#redisinsight-web端管理"><span>redisinsight web端管理</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">8001</span>:8001 <span class="token parameter variable">--name</span> redisinsight <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token parameter variable">-v</span> E:<span class="token punctuation">\\</span>docker<span class="token punctuation">\\</span>redisinsight:/db <span class="token parameter variable">-d</span> registry.cn-chengdu.aliyuncs.com/jinfang/redisinsight:latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,20),w={href:"http://127.0.0.1:8001/",target:"_blank",rel:"noopener noreferrer"},E=n("h2",{id:"nginx-perl",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#nginx-perl"},[n("span",null,"nginx:perl")])],-1),j=n("p",null,"mkdir -p nginx/conf | logs",-1),S={href:"http://registry.cn-chengdu.aliyuncs.com/jinfang/nginx:perl",target:"_blank",rel:"noopener noreferrer"},T=t(`<p>日志格式：</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>$time_iso8601
172.17.0.1 - - [2022-01-20T03:13:28+00:00] 

autoindex_localtime on;
172.17.0.1 - - [2022-01-20T03:16:05+00:00]

$time_local
172.17.0.1 - - [20/Jan/2022:03:05:54 +0000]

$time_iso8601+自定义格式
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">##############window</span>
<span class="token function">docker</span> run <span class="token parameter variable">--name</span> nginx <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token parameter variable">-v</span> E:<span class="token punctuation">\\</span>docker<span class="token punctuation">\\</span>nginx<span class="token punctuation">\\</span>html:/usr/share/nginx/html <span class="token parameter variable">-v</span> E:<span class="token punctuation">\\</span>docker<span class="token punctuation">\\</span>nginx<span class="token punctuation">\\</span>conf.d:/etc/nginx/conf.d <span class="token parameter variable">-v</span> E:<span class="token punctuation">\\</span>docker<span class="token punctuation">\\</span>nginx<span class="token punctuation">\\</span>conf/nginx.conf:/etc/nginx/nginx.conf <span class="token parameter variable">-v</span> E:<span class="token punctuation">\\</span>docker<span class="token punctuation">\\</span>nginx<span class="token punctuation">\\</span>logs:/var/log/nginx registry.cn-chengdu.aliyuncs.com/jinfang/nginx:perl
<span class="token comment">##############linux</span>
<span class="token function">docker</span> run <span class="token parameter variable">--name</span> nginx <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">80</span>:80  <span class="token punctuation">\\</span>
<span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token punctuation">\\</span>
<span class="token parameter variable">-v</span> /etc/localtime:/etc/localtime:ro <span class="token punctuation">\\</span>
<span class="token parameter variable">-v</span> /media/jf123/deepin/rj/docker/nginx/html:/usr/share/nginx/html <span class="token punctuation">\\</span>
<span class="token parameter variable">-v</span> /media/jf123/deepin/rj/docker/nginx/conf.d:/etc/nginx/conf.d <span class="token punctuation">\\</span>
<span class="token parameter variable">-v</span> /media/jf123/deepin/rj/docker/nginx/conf/nginx.conf:/etc/nginx/nginx.conf <span class="token punctuation">\\</span>
<span class="token parameter variable">-v</span> /media/jf123/deepin/rj/docker/nginx/logs:/var/log/nginx registry.cn-chengdu.aliyuncs.com/jinfang/nginx:perl

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>docker logs --tail=&quot;10&quot; nginx</p><p>docker exec -it nginx /bin/bash</p></blockquote><p>E:\\docker\\nginx\\conf\\nginx.conf</p><div class="language-nginx line-numbers-mode" data-ext="nginx" data-title="nginx"><pre class="language-nginx"><code><span class="token comment">#user  nginx;</span>
<span class="token directive"><span class="token keyword">worker_processes</span>  <span class="token number">1</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">error_log</span>  /var/log/nginx/error.log warn</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">pid</span>        /var/run/nginx.pid</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">events</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">worker_connections</span>  <span class="token number">1024</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">{</span>
 <span class="token directive"><span class="token keyword">server_tokens</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">include</span>       /etc/nginx/mime.types</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">default_type</span>  application/octet-stream</span><span class="token punctuation">;</span>
 
    <span class="token comment">## $time_iso8601、$time_local</span>
 <span class="token directive"><span class="token keyword">log_format</span>  main  <span class="token string">&#39;<span class="token variable">$remote_addr</span> - <span class="token variable">$remote_user</span> [<span class="token variable">$time_iso8601]</span> &quot;<span class="token variable">$request</span>&quot; &#39;</span>
       <span class="token string">&#39;<span class="token variable">$status</span> <span class="token variable">$body_bytes_sent</span> &quot;<span class="token variable">$http_referer</span>&quot; &#39;</span>
                      <span class="token string">&#39;&quot;<span class="token variable">$http_user_agent</span>&quot; &quot;<span class="token variable">$http_x_forwarded_for</span>&quot;&#39;</span></span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">log_format</span>  mylog <span class="token string">&#39;{&quot;date_time&quot;: &quot;<span class="token variable">$year</span>-<span class="token variable">$month</span>-<span class="token variable">$day</span> <span class="token variable">$hour</span>:<span class="token variable">$minutes</span>:<span class="token variable">$seconds</span>&quot;,&#39;</span>
                      <span class="token string">&#39;&quot;host&quot;: &quot;<span class="token variable">$server_addr</span>&quot;,&#39;</span>
                      <span class="token string">&#39;&quot;client_ip&quot;: &quot;<span class="token variable">$remote_addr</span>&quot;,&#39;</span>
                      <span class="token string">&#39;&quot;client_id&quot;: &quot;<span class="token variable">$remote_user</span>&quot;,&#39;</span>
                      <span class="token string">&#39;&quot;url&quot;: &quot;<span class="token variable">$request_uri</span>&quot;,&#39;</span>
                      <span class="token string">&#39;&quot;request&quot;: &quot;<span class="token variable">$request</span>&quot;,&#39;</span>
                      <span class="token string">&#39;&quot;referer&quot;: &quot;<span class="token variable">$http_referer</span>&quot;,&#39;</span>
                      <span class="token string">&#39;&quot;request_time&quot;: &quot;<span class="token variable">$request_time</span>&quot;,&#39;</span>
                      <span class="token string">&#39;&quot;status&quot;: &quot;<span class="token variable">$status</span>&quot;,&#39;</span>
                      <span class="token string">&#39;&quot;size&quot;: &quot;<span class="token variable">$body_bytes_sent</span>&quot;,&#39;</span>
                      <span class="token string">&#39;&quot;info&quot;: &quot;<span class="token variable">$http_user_agent</span>&quot;,&#39;</span>
                      <span class="token string">&#39;&quot;x_forwarded_for&quot;: &quot;<span class="token variable">$http_x_forwarded_for</span>&quot;&#39;</span>
                      <span class="token string">&#39;}&#39;</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">sendfile</span>        <span class="token boolean">on</span></span><span class="token punctuation">;</span>
 <span class="token comment">#tcp_nopush     on;</span>
 <span class="token directive"><span class="token keyword">keepalive_timeout</span>  <span class="token number">65</span></span><span class="token punctuation">;</span>

 <span class="token directive"><span class="token keyword">client_max_body_size</span> <span class="token number">50m</span></span><span class="token punctuation">;</span>
 <span class="token directive"><span class="token keyword">client_body_buffer_size</span> <span class="token number">256k</span></span><span class="token punctuation">;</span>
 <span class="token directive"><span class="token keyword">client_header_timeout</span> <span class="token number">3m</span></span><span class="token punctuation">;</span>
 <span class="token directive"><span class="token keyword">client_body_timeout</span> <span class="token number">3m</span></span><span class="token punctuation">;</span>
 <span class="token directive"><span class="token keyword">proxy_connect_timeout</span> <span class="token number">300s</span></span><span class="token punctuation">;</span>
 <span class="token directive"><span class="token keyword">proxy_read_timeout</span> <span class="token number">300s</span></span><span class="token punctuation">;</span>
 <span class="token directive"><span class="token keyword">proxy_send_timeout</span> <span class="token number">300s</span></span><span class="token punctuation">;</span>
 <span class="token directive"><span class="token keyword">proxy_buffer_size</span> <span class="token number">64k</span></span><span class="token punctuation">;</span>
 <span class="token directive"><span class="token keyword">proxy_buffers</span> <span class="token number">4</span> <span class="token number">32k</span></span><span class="token punctuation">;</span>
 <span class="token directive"><span class="token keyword">proxy_busy_buffers_size</span> <span class="token number">64k</span></span><span class="token punctuation">;</span>
 <span class="token directive"><span class="token keyword">proxy_temp_file_write_size</span> <span class="token number">64k</span></span><span class="token punctuation">;</span>
 <span class="token directive"><span class="token keyword">proxy_ignore_client_abort</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
 <span class="token directive"><span class="token keyword">proxy_set_header</span> Host <span class="token variable">$host</span></span><span class="token punctuation">;</span>
 <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Forwarder-For <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">gzip</span>  <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">include</span> /etc/nginx/conf.d/*.conf</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>E:\\docker\\nginx\\conf.d\\自己的配置文件.conf</p><div class="language-nginx line-numbers-mode" data-ext="nginx" data-title="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">upstream</span> util_server</span> <span class="token punctuation">{</span> 
    <span class="token directive"><span class="token keyword">server</span> 192.168.100.4:51320</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">upstream</span> util_dev_server</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">server</span> 192.168.100.4:51321</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">upstream</span> util_test_server</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">server</span> 192.168.100.4:51322</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span>  www.util.cn</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">charset</span> utf-8</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">include</span> /etc/nginx/conf.d/time.txt</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">access_log</span>  /var/log/nginx/util.log  mylog</span><span class="token punctuation">;</span> <span class="token comment"># buffer=32k;</span>
    
    <span class="token directive"><span class="token keyword">location</span> /util/</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">proxy_pass</span> http://util_server/util/</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token directive"><span class="token keyword">location</span> /util-dev/</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">proxy_pass</span> http://util_dev_server/util-dev/</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token directive"><span class="token keyword">location</span> /util-test/</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">proxy_pass</span> http://util_test_server/-util-test/</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
 <span class="token comment">#error_page  404              /404.html;</span>

    <span class="token directive"><span class="token keyword">error_page</span>   <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>  /50x.html</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">location</span> = /50x.html</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">root</span>   /usr/share/nginx/html</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>time.txt</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>if ($time_iso8601 ~ &quot;^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})&quot;) {
 set $year $1;
 set $month $2;
 set $day $3;
 set $hour $4;
 set $minutes $5;
 set $seconds $6;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>跨域 : 在server location下添加add_header</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>add_header Access-Control-Allow-Origin *;
add_header Access-Control-Allow-Headers X-Requested-With;
add_header Access-Control-Allow-Methods GET,POST,OPTIONS;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="nacos" tabindex="-1"><a class="header-anchor" href="#nacos"><span>nacos</span></a></h2>`,14),M={href:"https://nacos.io/zh-cn/docs/quick-start.html",target:"_blank",rel:"noopener noreferrer"},A=n("br",null,null,-1),O={href:"https://blog.csdn.net/qq_42476834/article/details/121149424",target:"_blank",rel:"noopener noreferrer"},R=n("br",null,null,-1),$={href:"https://hub.docker.com/r/nacos/nacos-server",target:"_blank",rel:"noopener noreferrer"},D={href:"http://registry.cn-chengdu.aliyuncs.com/jinfang/nacos-server:1.4.2",target:"_blank",rel:"noopener noreferrer"},I={href:"http://registry.cn-chengdu.aliyuncs.com/jinfang/nacos-server:2.0.3",target:"_blank",rel:"noopener noreferrer"},P=t(`<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>-----------------------------------
window
-----------------------------------
<span class="token comment">############使用配置项</span>
<span class="token function">docker</span> run <span class="token parameter variable">--env</span> <span class="token assign-left variable">MODE</span><span class="token operator">=</span>standalone <span class="token parameter variable">--name</span> nacos <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token parameter variable">-v</span> E:<span class="token punctuation">\\</span>docker<span class="token punctuation">\\</span>nacos<span class="token punctuation">\\</span>data:/home/nacos/data <span class="token parameter variable">-v</span> E:<span class="token punctuation">\\</span>docker<span class="token punctuation">\\</span>nacos<span class="token punctuation">\\</span>logs:/home/nacos/logs <span class="token parameter variable">-e</span> <span class="token assign-left variable">PREFER_HOST_MODE</span><span class="token operator">=</span>ip <span class="token parameter variable">-e</span> <span class="token assign-left variable">SPRING_DATASOURCE_PLATFORM</span><span class="token operator">=</span>mysql <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_DATABASE_NUM</span><span class="token operator">=</span><span class="token number">1</span> <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_SERVICE_HOST</span><span class="token operator">=</span><span class="token number">192.168</span>.100.4 <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_SERVICE_PORT</span><span class="token operator">=</span><span class="token number">3306</span> <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_SERVICE_DB_NAME</span><span class="token operator">=</span>nacos_config <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_SERVICE_USER</span><span class="token operator">=</span>root <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_SERVICE_PASSWORD</span><span class="token operator">=</span>root <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">8848</span>:8848 registry.cn-chengdu.aliyuncs.com/jinfang/nacos-server:1.4.2
<span class="token comment">############使用本地config文件配置</span>
<span class="token function">docker</span> run <span class="token parameter variable">--env</span> <span class="token assign-left variable">MODE</span><span class="token operator">=</span>standalone <span class="token parameter variable">--name</span> nacos <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token parameter variable">-v</span> E:<span class="token punctuation">\\</span>docker<span class="token punctuation">\\</span>nacos<span class="token punctuation">\\</span>conf:/home/nacos/conf <span class="token parameter variable">-v</span> E:<span class="token punctuation">\\</span>docker<span class="token punctuation">\\</span>nacos<span class="token punctuation">\\</span>data:/home/nacos/data <span class="token parameter variable">-v</span> E:<span class="token punctuation">\\</span>docker<span class="token punctuation">\\</span>nacos<span class="token punctuation">\\</span>logs:/home/nacos/logs <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">8848</span>:8848 registry.cn-chengdu.aliyuncs.com/jinfang/nacos-server:1.4.2


-----------------------------------
Linux
-----------------------------------
<span class="token function">docker</span> run <span class="token parameter variable">--env</span> <span class="token assign-left variable">MODE</span><span class="token operator">=</span>standalone  <span class="token parameter variable">--name</span> nacos <span class="token punctuation">\\</span>
<span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token punctuation">\\</span>
<span class="token parameter variable">-v</span> /media/jf123/deepin/rj/docker/nacos/data:/home/nacos/data <span class="token punctuation">\\</span>
<span class="token parameter variable">-v</span> /media/jf123/deepin/rj/docker/nacos/logs:/home/nacos/logs <span class="token punctuation">\\</span>
<span class="token parameter variable">-e</span> <span class="token assign-left variable">SPRING_DATASOURCE_PLATFORM</span><span class="token operator">=</span>mysql <span class="token punctuation">\\</span>
<span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_DATABASE_NUM</span><span class="token operator">=</span><span class="token number">1</span> <span class="token punctuation">\\</span>
<span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_SERVICE_HOST</span><span class="token operator">=</span><span class="token number">192.168</span>.100.4 <span class="token punctuation">\\</span>
<span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_SERVICE_PORT</span><span class="token operator">=</span><span class="token number">3306</span> <span class="token punctuation">\\</span>
<span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_SERVICE_DB_NAME</span><span class="token operator">=</span>nacos_config <span class="token punctuation">\\</span>
<span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_SERVICE_USER</span><span class="token operator">=</span>root <span class="token punctuation">\\</span>
<span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_SERVICE_PASSWORD</span><span class="token operator">=</span>root <span class="token punctuation">\\</span>
<span class="token parameter variable">-e</span> <span class="token assign-left variable">JVM_XMS</span><span class="token operator">=</span>1g <span class="token punctuation">\\</span>
<span class="token parameter variable">-e</span> <span class="token assign-left variable">JVM_XMX</span><span class="token operator">=</span>1g <span class="token punctuation">\\</span>
<span class="token parameter variable">-e</span> <span class="token assign-left variable">JVN_XMN</span><span class="token operator">=</span>512m <span class="token punctuation">\\</span>
<span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">8848</span>:8848 registry.cn-chengdu.aliyuncs.com/jinfang/nacos-server:1.4.2
<span class="token comment">############使用本地config文件配置</span>
<span class="token function">docker</span> run <span class="token parameter variable">--env</span> <span class="token assign-left variable">MODE</span><span class="token operator">=</span>standalone <span class="token parameter variable">--name</span> nacos <span class="token punctuation">\\</span>
<span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token punctuation">\\</span>
<span class="token parameter variable">-v</span> /media/jf123/deepin/rj/docker/nacos/conf:/home/nacos/conf <span class="token punctuation">\\</span>
<span class="token parameter variable">-v</span> /media/jf123/deepin/rj/docker/nacos/data:/home/nacos/data <span class="token punctuation">\\</span>
<span class="token parameter variable">-v</span> /media/jf123/deepin/rj/docker/nacos/logs:/home/nacos/logs <span class="token punctuation">\\</span>
<span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">8848</span>:8848 registry.cn-chengdu.aliyuncs.com/jinfang/nacos-server:1.4.2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>docker exec -it nacos /bin/bash</p><p>docker exec -it web /bin/bash</p></blockquote>`,2),N={href:"http://localhost:8848/nacos",target:"_blank",rel:"noopener noreferrer"},C=n("h2",{id:"rabbitmq-3-8-x-management",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#rabbitmq-3-8-x-management"},[n("span",null,"rabbitmq:3.8.x-management")])],-1),L={href:"https://www.rabbitmq.com/networking.html",target:"_blank",rel:"noopener noreferrer"},Q=t(`<p>下载镜像</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> pull registry.cn-chengdu.aliyuncs.com/jinfang/rabbitmq:3.9.20-management
---
<span class="token function">docker</span> pull rabbitmq:3.8.34-management
<span class="token function">docker</span> tag rabbitmq:3.8.34-management registry.cn-chengdu.aliyuncs.com/jinfang/rabbitmq:3.8.34-management
<span class="token function">docker</span> push registry.cn-chengdu.aliyuncs.com/jinfang/rabbitmq:3.8.34-management
---
<span class="token function">docker</span> pull rabbitmq:3.9.20-management
<span class="token function">docker</span> tag rabbitmq:3.9.20-management registry.cn-chengdu.aliyuncs.com/jinfang/rabbitmq:3.9.20-management
<span class="token function">docker</span> push registry.cn-chengdu.aliyuncs.com/jinfang/rabbitmq:3.9.20-management
---
<span class="token function">docker</span> pull rabbitmq:3.10.5-management
<span class="token function">docker</span> tag rabbitmq:3.10.5-management registry.cn-chengdu.aliyuncs.com/jinfang/rabbitmq:3.10.5-management
<span class="token function">docker</span> push registry.cn-chengdu.aliyuncs.com/jinfang/rabbitmq:3.10.5-management
--------------------
<span class="token function">docker</span> rmi rabbitmq:3.8.34-management
<span class="token function">docker</span> rmi rabbitmq:3.9.20-management
<span class="token function">docker</span> rmi rabbitmq:3.10.5-management
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行容器</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> rabbitmq3.9.20 <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token parameter variable">-p</span> <span class="token number">5671</span>:5671 <span class="token parameter variable">-p</span> <span class="token number">5672</span>:5672 <span class="token parameter variable">-p</span> <span class="token number">4369</span>:4369 <span class="token parameter variable">-p</span> <span class="token number">25672</span>:25672 <span class="token parameter variable">-p</span> <span class="token number">15672</span>:15672 registry.cn-chengdu.aliyuncs.com/jinfang/rabbitmq:3.9.20-management

<span class="token number">4369</span>, <span class="token number">25672</span> <span class="token punctuation">(</span>Erlang发现<span class="token operator">&amp;</span>集群端口<span class="token punctuation">)</span>
<span class="token number">5672</span>, <span class="token number">5671</span> <span class="token punctuation">(</span>AMQP端口<span class="token punctuation">)</span>
<span class="token number">15672</span> <span class="token punctuation">(</span>web管理后台端口<span class="token punctuation">)</span>
<span class="token number">61613</span>, <span class="token number">61614</span> <span class="token punctuation">(</span>STOMP协议端口<span class="token punctuation">)</span>
<span class="token number">1883</span>, <span class="token number">8883</span> <span class="token punctuation">(</span>MQTT协议端口<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),V={href:"http://localhost:15672/#/",target:"_blank",rel:"noopener noreferrer"},Y=n("h2",{id:"elasticsearch-kibana",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#elasticsearch-kibana"},[n("span",null,"elasticsearch+kibana")])],-1),z=n("p",null,"安装",-1),B={href:"https://www.elastic.co/cn/downloads/elasticsearch#ga-release",target:"_blank",rel:"noopener noreferrer"},G=t(`<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> pull elasticsearch:7.17.4
<span class="token function">docker</span> pull kibana:7.17.4
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> tag elasticsearch:7.17.4 registry.cn-chengdu.aliyuncs.com/jinfang/elasticsearch:7.17.4
<span class="token function">docker</span> push registry.cn-chengdu.aliyuncs.com/jinfang/elasticsearch:7.17.4
<span class="token function">docker</span> rmi elasticsearch:7.17.4
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> tag kibana:7.17.4 registry.cn-chengdu.aliyuncs.com/jinfang/kibana:7.17.4
<span class="token function">docker</span> push registry.cn-chengdu.aliyuncs.com/jinfang/kibana:7.17.4
<span class="token function">docker</span> rmi kibana:7.17.4
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> pull registry.cn-chengdu.aliyuncs.com/jinfang/elasticsearch:7.17.4 存储和检索数据
<span class="token function">docker</span> pull registry.cn-chengdu.aliyuncs.com/jinfang/kibana:7.17.4 可视化数据
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>配置</p><h3 id="elasticsearch" tabindex="-1"><a class="header-anchor" href="#elasticsearch"><span>elasticsearch</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">###############linux</span>
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /data/docker/elasticsearch/config
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /data/docker/elasticsearch/data
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /data/docker/elasticsearch/plugins
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /data/docker/elasticsearch/logs
<span class="token function">chmod</span> <span class="token parameter variable">-R</span> <span class="token number">775</span> /data/docker/elasticsearch
------------------------------------------------
<span class="token builtin class-name">echo</span> <span class="token string">&quot;http.host: 0.0.0.0&quot;</span> <span class="token operator">&gt;&gt;</span> /data/docker/elasticsearch/config/elasticsearch.yml
------------------------------------------------
<span class="token function">docker</span> run <span class="token parameter variable">--name</span> es <span class="token parameter variable">-p</span> <span class="token number">9200</span>:9200 <span class="token parameter variable">-p</span> <span class="token number">9300</span>:9300 <span class="token parameter variable">-e</span> <span class="token string">&quot;discovery.type=single-node&quot;</span> <span class="token punctuation">\\</span>
<span class="token parameter variable">-e</span> <span class="token assign-left variable">ES_JAVA_OPTS</span><span class="token operator">=</span><span class="token string">&quot;-Xms512m -Xmx1g&quot;</span> <span class="token punctuation">\\</span>
<span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token punctuation">\\</span>
<span class="token parameter variable">-v</span> /media/jf123/deepin/rj/docker/elasticsearch/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml <span class="token punctuation">\\</span>
<span class="token parameter variable">-v</span> /media/jf123/deepin/rj/docker/elasticsearch/data:/usr/share/elasticsearch/data <span class="token punctuation">\\</span>
<span class="token parameter variable">-v</span> /media/jf123/deepin/rj/docker/elasticsearch/plugins:/usr/share/elasticsearch/plugins <span class="token punctuation">\\</span>
<span class="token parameter variable">-v</span> /media/jf123/deepin/rj/docker/elasticsearch/logs:/usr/share/elasticsearch/logs <span class="token punctuation">\\</span>
<span class="token parameter variable">-d</span> registry.cn-chengdu.aliyuncs.com/jinfang/elasticsearch:7.17.4

<span class="token comment">###############window</span>
<span class="token function">docker</span> run <span class="token parameter variable">--name</span> es <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token parameter variable">-p</span> <span class="token number">9200</span>:9200 <span class="token parameter variable">-p</span> <span class="token number">9300</span>:9300 <span class="token parameter variable">-e</span> <span class="token string">&quot;discovery.type=single-node&quot;</span> <span class="token parameter variable">-e</span> <span class="token assign-left variable">ES_JAVA_OPTS</span><span class="token operator">=</span><span class="token string">&quot;-Xms512m -Xmx1g&quot;</span> <span class="token parameter variable">-v</span> E:<span class="token punctuation">\\</span>docker<span class="token punctuation">\\</span>elasticsearch<span class="token punctuation">\\</span>config<span class="token punctuation">\\</span>elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml <span class="token parameter variable">-v</span> E:<span class="token punctuation">\\</span>docker<span class="token punctuation">\\</span>elasticsearch<span class="token punctuation">\\</span>data:/usr/share/elasticsearch/data <span class="token parameter variable">-v</span> E:<span class="token punctuation">\\</span>docker<span class="token punctuation">\\</span>elasticsearch<span class="token punctuation">\\</span>plugins:/usr/share/elasticsearch/plugins <span class="token parameter variable">-d</span> registry.cn-chengdu.aliyuncs.com/jinfang/elasticsearch:7.17.4
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>elasticsearch.yml</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">http.host</span><span class="token punctuation">:</span> 0.0.0.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,9),X={href:"http://localhost:9200",target:"_blank",rel:"noopener noreferrer"},U={href:"http://localhost:9200/_cat/nodes",target:"_blank",rel:"noopener noreferrer"},Z=t(`<h3 id="kibana" tabindex="-1"><a class="header-anchor" href="#kibana"><span>kibana</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">--name</span> kibana <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token parameter variable">-e</span> <span class="token string">&quot;ELASTICSEARCH_HOSTS=http://192.168.0.5:9200&quot;</span> <span class="token parameter variable">-p</span> <span class="token number">5601</span>:5601 <span class="token parameter variable">-d</span> registry.cn-chengdu.aliyuncs.com/jinfang/kibana:7.17.4
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,2),H={href:"http://localhost:5601",target:"_blank",rel:"noopener noreferrer"},J=t(`<p>kibana.yml</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;2&#39;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">kibana</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> kibana<span class="token punctuation">:</span>7.17.4
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./kibana.yml<span class="token punctuation">:</span>/usr/share/kibana/config/kibana.yml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ik-分词器" tabindex="-1"><a class="header-anchor" href="#ik-分词器"><span>ik 分词器</span></a></h3>`,3),W={href:"https://github.com/medcl/elasticsearch-analysis-ik/releases",target:"_blank",rel:"noopener noreferrer"},F={href:"https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.17.4/elasticsearch-analysis-ik-7.17.4.zip",target:"_blank",rel:"noopener noreferrer"},K=n("p",null,"解压到es：plugins",-1),nn=n("p",null,"重启 es",-1);function sn(an,en){const a=l("ExternalLinkIcon");return p(),c("div",null,[o,n("h1",d,[n("a",u,[n("span",null,[n("a",k,[s("csdn 博客地址"),e(a)])])])]),m,n("p",null,[n("a",v,[s("https://hub.docker.com/search?q=mysql&type=image"),e(a)])]),n("blockquote",null,[n("p",null,[s("docker pull "),n("a",b,[s("registry.cn-chengdu.aliyuncs.com/jinfang/mysql:5.7.38"),e(a)])])]),g,n("p",null,[s("使用教程："),n("a",h,[s("https://hub.docker.com/_/redis?tab=description"),e(a)])]),n("blockquote",null,[f,n("p",null,[s("docker pull "),n("a",_,[s("registry.cn-chengdu.aliyuncs.com/jinfang/redis:latest"),e(a)])]),n("p",null,[s("docker tag redis:latest "),n("a",y,[s("registry.cn-chengdu.aliyuncs.com/jinfang/redis:latest"),e(a)])]),n("p",null,[s("docker push "),n("a",q,[s("registry.cn-chengdu.aliyuncs.com/jinfang/redis:latest"),e(a)])])]),x,n("p",null,[n("a",w,[s("http://127.0.0.1:8001/"),e(a)])]),E,j,n("blockquote",null,[n("p",null,[s("docker pull "),n("a",S,[s("registry.cn-chengdu.aliyuncs.com/jinfang/nginx:perl"),e(a)])])]),T,n("p",null,[s("当前推荐的稳定版本为1.4.x或2.0.x。"),n("a",M,[s("官网文档"),e(a)]),A,n("a",O,[s("推荐参考：docker安装nacos2.0.x + mysql5.7"),e(a)]),R,n("a",$,[s("docker 镜像"),e(a)])]),n("blockquote",null,[n("p",null,[s("docker pull "),n("a",D,[s("registry.cn-chengdu.aliyuncs.com/jinfang/nacos-server:1.4.2"),e(a)])]),n("p",null,[s("docker pull "),n("a",I,[s("registry.cn-chengdu.aliyuncs.com/jinfang/nacos-server:2.0.3"),e(a)])])]),P,n("p",null,[s("登陆："),n("a",N,[s("http://localhost:8848/nacos"),e(a)]),s(" 账号、密码：nacos")]),C,n("p",null,[n("a",L,[s("https://www.rabbitmq.com/networking.html"),e(a)])]),Q,n("p",null,[n("a",V,[s("http://localhost:15672/#/"),e(a)]),s(" 账号：guest")]),Y,z,n("p",null,[n("a",B,[s("https://www.elastic.co/cn/downloads/elasticsearch#ga-release"),e(a)])]),G,n("p",null,[n("a",X,[s("http://localhost:9200"),e(a)])]),n("p",null,[n("a",U,[s("http://localhost:9200/_cat/nodes"),e(a)])]),Z,n("p",null,[n("a",H,[s("http://localhost:5601"),e(a)])]),J,n("p",null,[s("下载："),n("a",W,[s("https://github.com/medcl/elasticsearch-analysis-ik/releases"),e(a)])]),n("p",null,[n("a",F,[s("https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.17.4/elasticsearch-analysis-ik-7.17.4.zip"),e(a)])]),K,nn])}const pn=i(r,[["render",sn],["__file","docker-install-mysql-redis-nginx-nacos-mq-es.html.vue"]]),cn=JSON.parse('{"path":"/docker/docker-install-mysql-redis-nginx-nacos-mq-es.html","title":"docker安装mysql-redis-nginx-nacos-mq-es","lang":"zh-CN","frontmatter":{"icon":"docker1","title":"docker安装mysql-redis-nginx-nacos-mq-es","category":["Docker"],"headerDepth":5,"date":"2020-01-01T00:00:00.000Z","order":3,"tag":["Docker"],"description":"Docker安装mysql、redis、nginx、nacos、mq、es等","head":[["meta",{"property":"og:url","content":"https://blogres.github.io/docker/docker-install-mysql-redis-nginx-nacos-mq-es.html"}],["meta",{"property":"og:title","content":"docker安装mysql-redis-nginx-nacos-mq-es"}],["meta",{"property":"og:description","content":"Docker安装mysql、redis、nginx、nacos、mq、es等"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-05T14:07:04.000Z"}],["meta",{"property":"article:author","content":"blogres"}],["meta",{"property":"article:tag","content":"Docker"}],["meta",{"property":"article:published_time","content":"2020-01-01T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-03-05T14:07:04.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"docker安装mysql-redis-nginx-nacos-mq-es\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2020-01-01T00:00:00.000Z\\",\\"dateModified\\":\\"2024-03-05T14:07:04.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"blogres\\",\\"url\\":\\"/article\\"}]}"]]},"headers":[{"level":2,"title":"mysql:5.7.x","slug":"mysql-5-7-x","link":"#mysql-5-7-x","children":[]},{"level":2,"title":"redis:buster","slug":"redis-buster","link":"#redis-buster","children":[]},{"level":2,"title":"docker 端口占用问题","slug":"docker-端口占用问题","link":"#docker-端口占用问题","children":[]},{"level":2,"title":"redisinsight web端管理","slug":"redisinsight-web端管理","link":"#redisinsight-web端管理","children":[]},{"level":2,"title":"nginx:perl","slug":"nginx-perl","link":"#nginx-perl","children":[]},{"level":2,"title":"nacos","slug":"nacos","link":"#nacos","children":[]},{"level":2,"title":"rabbitmq:3.8.x-management","slug":"rabbitmq-3-8-x-management","link":"#rabbitmq-3-8-x-management","children":[]},{"level":2,"title":"elasticsearch+kibana","slug":"elasticsearch-kibana","link":"#elasticsearch-kibana","children":[{"level":3,"title":"elasticsearch","slug":"elasticsearch","link":"#elasticsearch","children":[]},{"level":3,"title":"kibana","slug":"kibana","link":"#kibana","children":[]},{"level":3,"title":"ik 分词器","slug":"ik-分词器","link":"#ik-分词器","children":[]}]}],"git":{"createdTime":1706536810000,"updatedTime":1709647624000,"contributors":[{"name":"topjfy","email":"topjfk@163.com","commits":3}]},"readingTime":{"minutes":6.17,"words":1850},"filePathRelative":"docker/docker-install-mysql-redis-nginx-nacos-mq-es.md","localizedDate":"2020年1月1日","excerpt":"<p>Docker安装mysql、redis、nginx、nacos、mq、es等</p>\\n","autoDesc":true}');export{pn as comp,cn as data};
